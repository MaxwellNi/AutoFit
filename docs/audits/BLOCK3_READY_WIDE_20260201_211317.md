# BLOCK3 READY WIDE (20260201_211317)

Wide Feature Freeze in progress. WIDE_STAMP=20260201_211317.

## Status

- Raw inventory: DONE (offers 500k, edgar 500k sample)
- column_contract_wide: DONE (non_null>=0.001, default keep unknown, exclude nested)
- offers_core_full_snapshot_wide: IN PROGRESS (112M scan)
- offers_core_full_daily_wide: PENDING (after snapshot)
- snapshots_index: PENDING
- edgar_feature_store_full_daily_wide: PENDING
- multiscale_full_wide: PENDING
- Audits: PENDING

## Exclude Nested (Array/Map columns not in core)

Array/map columns excluded from offers_core (PyArrow nested conversion limitation):
comments, financial_statements_files, images_of_description_url, investors,
location, market_tags, media_mentions, team, pdf_links, perks, questions,
reasons_to_invest, social_media, updates, use_of_funds, videos_of_description_url,
slide_decks.

These remain in raw; add json/len/hash derived in offers_text or future layer.

## Commands (run after snapshot completes)

```bash
export WIDE_STAMP=20260201_211317
bash scripts/WIDE_BUILD_CMD.sh
```

## Full raw scan commands (from scratch)

```bash
# Raw inventory (10M offers, 5M edgar)
WIDE_STAMP=$(date +%Y%m%d_%H%M%S)
WIDE_ANALYSIS=runs/orchestrator/20260129_073037/analysis/wide_${WIDE_STAMP}
mkdir -p ${WIDE_ANALYSIS}/logs

PYTHONUNBUFFERED=1 python scripts/profile_raw_delta_columns.py \
  --raw_delta data/raw/offers --mode offers --scan_sample_rows 10000000 \
  --output_json ${WIDE_ANALYSIS}/raw_offers_profile.json \
  --output_md ${WIDE_ANALYSIS}/raw_offers_profile.md \
  --inventory_out ${WIDE_ANALYSIS}/raw_offers_inventory.parquet \
  2>&1 | tee ${WIDE_ANALYSIS}/logs/raw_inventory_offers_${WIDE_STAMP}.log

PYTHONUNBUFFERED=1 python scripts/profile_raw_delta_columns.py \
  --raw_delta data/raw/edgar/accessions --mode edgar --scan_sample_rows 5000000 \
  --output_json ${WIDE_ANALYSIS}/raw_edgar_profile.json \
  --output_md ${WIDE_ANALYSIS}/raw_edgar_profile.md \
  --inventory_out ${WIDE_ANALYSIS}/raw_edgar_inventory.parquet \
  2>&1 | tee ${WIDE_ANALYSIS}/logs/raw_inventory_edgar_${WIDE_STAMP}.log

# Wide snapshot (112M scan, ~1-2h)
PYTHONUNBUFFERED=1 python scripts/build_offers_core_full_snapshot.py \
  --raw_offers_delta data/raw/offers \
  --contract configs/column_contract_wide.yaml \
  --output_dir runs/offers_core_full_snapshot_wide_${WIDE_STAMP} \
  --overwrite 1 2>&1 | tee ${WIDE_ANALYSIS}/logs/build_snapshot_wide_${WIDE_STAMP}.log

# Then run WIDE_BUILD_CMD.sh
```
